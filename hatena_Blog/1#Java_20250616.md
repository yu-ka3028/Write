Java 初心者/オブジェクト指向/静的型付け:final と参照渡し、そしてカプセル化の考え方

# 背景

Java の学習とオブジェクト指向の理解定着のため書籍で学習を進めると、
「public final と private の違いってなんだろう？」そして参照渡し、値渡しの他に「参照の値渡し」の存在を認知しました...!!

プログラミング学習にはじめて着手したのが2024年1月...当時はRubyでした。知らないこととの遭遇は絶えることなく...コツコツ進めています。

# 前提知識

- オブジェクト指向の基本構造

  ```
  クラス（設計図）
  ├─ フィールド変数（属性）
  ├─ コンストラクタ（初期化処理）
  └─ メソッド（操作）
     │
     └─ new演算子でインスタンス生成
        │
        └─ インスタンスA（オブジェクト）
           ├─ フィールド変数（A専用の値）
           └─ メソッド（クラスから共有）
        └─ インスタンスB（オブジェクト）
           ├─ フィールド変数（B専用の値）
           └─ メソッド（クラスから共有）
  ```

- 用語：渡す方が「実引数」、渡されたものは「仮引数」

# 今週の学びポイント

- point1: final で制限かけるのに public final？private と何が違う？

- point2: 参照先のみ final だと参照元の変更が反映される？

- point3: これらの考え方がカプセル化？

## 《point1》 final は変更を制限、private はアクセスを制限

```
- finalとprivate
  - final
    - final（クラス）：継承を禁止
    - final（変数）：再代入・変更を禁止（セッターも使用不可）
  - private
    - 同じクラス内のみアクセスが可能
    - ただしゲッターとセッターでアクセス・変更ができる点に注意
    - private final：外部からアクセス不可（private）かつ、継承による拡張は不可
      (ただし、トップレベルクラスはprivate不可)
```

クラスに対して private を使用しアクセスを不可にすれば内容の変更はできないかと思いきや、
ゲッターとセッターによりアクセス・変更は可能なため、private はあくまでクラス全体のアクセスを基本的に制限するものであり、フィールド変数ごとの変更は可能である。
では、参照元には final なしで参照先に final をつけた場合、内容は保持される？参照元の変更が反映されてしまう？

## 《point2》 Java は参照渡しはなく、参照の値渡し

```
- 値渡し（pass by value）
    1. 値をコピーして渡す
    2. 実引数と仮引数の紐付きはない
- 参照渡し（pass by reference）
    1. オブジェクトの参照値（ポインタ）を渡す
    2. 実引数と仮引数の紐付きが保たれる
- 参照（値）の値渡し（pass by referenceValue）
    これと値渡しが混ざってたが、こっちは参照元へ値の反映なし！
    1. オブジェクトの参照値（ポインタ）を渡す
    2. 実引数と仮引数の紐付きはない
```

【浮かんだ疑問】

```Java
// 参照元の変数
int number = 10;  // 初期値

// 参照先の変数（final付き）
final int finalNumber = number;  // numberの値をコピー

// 参照元の値を変更
number = 20;  // numberの値を変更
```

この時、finalNumber の値はどうなるか？

```Java
System.out.println("number: " + number);        // 20
System.out.println("finalNumber: " + finalNumber);  // 10（変更されない）
```

【結論】
Java には参照渡しがなく、参照の値渡しなので「参照元の変数（number）」と「参照先の変数（finalNumber）」はそれぞれ独立した変数のため変更されない。

仮引数だけ final にしても実引数の変更が紐づかれてしまうのでは？と思い調べてみると
参照の値渡し...??参照渡しの言い換えバージョンくらいに思っていましたら...全然違うものでした(恥)
Java では参照渡しはなく、実引数と仮引数の紐付けはされないため仮引数だけ final つければ参照先では内容が保持されると理解。
変更できる範囲、ピンポイントで変更可能にする方法、変更を禁止する方法などをしっかり理解してオブジェクト指向の原則でもあるカプセル化についても使いこなしていきたいです。

## 《point3》 カプセル化とは

カプセル化は外部からクラスを隠し、利用したいメソッドのみ公開することで独立性の高いプログラムを書く手法という認識。
Java Tutorials を読んで理解を深めたいなと思いますが、一旦ここまで。
オラクルの公式ドキュメントは英語しかない様子ですが、メインで見るドキュメントはどれなんだろう...

# 振り返り

以前 Ruby を学んでいたこともありオブジェクト指向はなんとなくわかっているつもりになっていたので、静的型付け言語である Jαva を学ぶ機会にちゃんと理解したいなと思いちょっとゆっくりめにインプットとアウトプットをしっかり意識して学習。
その都度「完全に理解した」とは思って進んでいますが、やはりプログラミング関連の学びは螺旋階段のようです。少しずつ知識が肉付けされていく感じがとてもわくわくする...!!

# 参考資料

- 新わかりやすい Java オブジェクト指向徹底解説（1-5 章 / 25 章）
- [Java に参照渡しはない](https://qiita.com/yoshitaro-yoyo/items/c3196058219788735dbe)
